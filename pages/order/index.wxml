<!--pages/order/index.wxml-->

<view wx:if="{{!swiper}}">
  <view class="swiper-tab">
    <view class="swiper-tab-list {{currentTab==0 ? 'on' : ''}}" data-current="0" bindtap="swichNav">进行中</view>
    <view class="swiper-tab-list {{currentTab==1 ? 'on' : ''}}" data-current="1" bindtap="swichNav">已完成</view>
    <view class="swiper-tab-list {{currentTab==2 ? 'on' : ''}}" data-current="2" bindtap="swichNav">已取消</view>
  </view>

  <swiper current="{{currentTab}}" class="swiper-box" duration="300" style='height:{{winHeight - 40}}px' bindchange="bindChange">

    <swiper-item>
      <scroll-view scroll-y="true" class='scroll-views'>
        <block wx:for="{{myOrder}}">
          <block wx:if="{{item.state.waitReceipt == true}}">
            <!-- 等待接单 -->
            <view class='contain'>
              <view class='head'>
                <image src='{{item.images}}'></image>
                <text>{{item.name}}<text>{{item.time}}</text></text>
                <view>
                  <image src='../../i/order/icon@2x.png' class='image1'> </image>
                  <text class='text1'>等待接单  <text class='text2'>工程师：抢单中</text></text>
                </view>
              </view>
              <view>
                <!-- <text class='te'>实付金额:{{pay}}</text> -->
                <view class='btn'>
                  <button class='firstbtn'>
                    取消订单
                  </button>
                  <button>
                    查看地图
                  </button>
                </view>
              </view>
            </view>
          </block>

          <block wx:elif="{{item.state.waitEngineer == true}}">
            <!-- 等待上门 -->
            <view class='contain'>
              <view class='head'>
                <image src='{{item.images}}'></image>
                <text>{{item.name}}<text>{{item.time}}</text></text>
                <view>
                  <image src='../../i/order/icon@2x.png' class='image1'> </image>
                  <text class='text1'>等待上门  <text class='text2'>工程师：上门中</text></text>
                </view>
              </view>
              <view>
                <!-- <text class='te'>实付金额:{{pay}}</text> -->
                <view class='btn'>
                  <button class='firstbtn'>
                    取消订单
                  </button>
                  <button>
                    查看地图
                  </button>
                </view>
              </view>
            </view>
          </block>

          <!-- 确认报价 -->
          <block wx:elif="{{item.state.bePrice == true}}">
            <view class='contain'>
              <view class='head'>
                <image src='{{item.images}}'></image>
                <text>{{item.name}}<text>{{item.time}}</text></text>
                <view>
                  <image src='../../i/order/icon@2x.png' class='image1'> </image>
                  <text class='text1'>确认报价</text>
                </view>
              </view>
              <view>
                <text class='te'>实付金额:\t{{item.price}}元</text>
                <view class='btn'>
                  <button class='firstbtn'>
                    取消订单
                  </button>
                  <button>
                    查看报价
                  </button>
                </view>
              </view>
            </view>
          </block>

          <block wx:elif="{{item.state.waitReceive == true}}">
            <!-- 等待i验收 -->
            <view class='contain'>
              <view class='head'>
                <image src='{{item.images}}'></image>
                <text>{{item.name}}<text>{{item.time}}</text></text>
                <view>
                  <image src='../../i/order/icon@2x.png' class='image1'> </image>
                  <text class='text1'>等待验收</text>
                </view>
              </view>
              <view>
                <text class='te'>实付金额:\t{{item.price}}</text>
                <view class='btn'>
                  <button class='firstbtn'>
                    取消订单
                  </button>
                  <button>
                    验收通过
                  </button>
                </view>
              </view>
            </view>
          </block>

          <block wx:elif="{{item.state.waitPay == true}}">
            <!-- 等待支付 -->
            <view class='contain'>
              <view class='head'>
                <image src='{{item.images}}'></image>
                <text>{{item.name}}<text>{{item.time}}</text></text>
                <view>
                  <image src='../../i/order/icon@2x.png' class='image1'> </image>
                  <text class='text1'>等待支付</text>
                </view>
              </view>
              <view>
                <text class='te'>实付金额:\t{{item.price}}</text>
                <view class='btn'>
                  <button>
                    找人代付
                  </button>
                  <button>
                    付款
                  </button>
                </view>
              </view>
            </view>
          </block>
        </block>
      </scroll-view>
    </swiper-item>

    <!-- 已完成 -->
    <swiper-item>
      <scroll-view scroll-y="true" class='scroll-views'>
        <block wx:for="{{myOrder}}">
          <block wx:if="{{item.state.finish == true}}">
            <view class='contain'>
              <view class='head'>
                <image src='{{item.images}}'></image>
                <text>{{item.name}}<text>{{item.time}}</text></text>
                <view>
                  <image src='../../i/order/icon@2x.png' class='image1'> </image>
                  <text class='text1'>等待评价</text>
                </view>
              </view>
              <view>
                <text  class='te'>实付金额: {{item.price}}</text>
                <view class='btn'>
                  <button bindtap='onQuality'>
                    申请质保
                  </button>
                  <button bindtap='onEvaluate'>
                    评价
                  </button>
                </view>
              </view>
            </view>
          </block>
        </block>
      </scroll-view>
    </swiper-item>

    <!-- 已取消 -->
    <swiper-item>
      <scroll-view scroll-y="true" class='scroll-views'>
        <block wx:for="{{myOrder}}">
          <block wx:if="{{item.state.cancel == true}}">
            <view class='contain'>
              <view class='head'>
                <image src='{{item.images}}'></image>
                <text>{{item.name}}<text>{{item.time}}</text></text>
                <view>
                  <image src='../../i/order/icon@2x.png' class='image1'> </image>
                  <text class='text1'>取消</text>
                </view>
              </view>
              <view>
                <text wx:if="{{item.price != ''}}" class='te'>实付金额: {{item.price}}</text>
                <view class='btn'>
                  <button class='firstbtn'>
                    删除订单
                  </button>
                  <button>
                    重新下单
                  </button>
                </view>
              </view>
            </view>
          </block>
        </block>
      </scroll-view>
    </swiper-item>

  </swiper>
</view>